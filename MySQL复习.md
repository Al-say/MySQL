# MySQL数据库补考复习指南

## 一、选择题（40分，20题）

### 1. 基本概念
1. **数据库系统基础**
   - DB（数据库）：
     * 定义：存储在计算机内的相关数据的集合
     * 特点：结构化存储、共享性高、冗余度低、独立性高
     * 实例：学生信息库、图书管理库、银行账户库
   
   - DBMS（数据库管理系统）：
     * 定义：管理数据库的软件系统
     * 功能：数据定义、数据操作、数据库运行管理、数据库建立和维护
     * 常见DBMS：MySQL、Oracle、SQL Server、PostgreSQL、MongoDB（NoSQL）
   
   - DBS（数据库系统）：
     * 组成：DB + DBMS + 应用系统 + 数据库管理员(DBA)
     * 特点：统一管理、数据共享、减少冗余、保证一致性
   
   - 数据独立性：
     * 物理独立性：应用程序与数据存储方式无关
     * 逻辑独立性：应用程序与数据库逻辑结构无关
     * 作用：减少维护成本，提高系统可维护性

2. **三级模式结构**
   - 外模式（External Schema）：
     * 定义：用户视图级别，是用户看到的数据库的数据视图
     * 特点：一个数据库可以有多个外模式
     * 表现：在SQL中通过视图(VIEW)实现
   
   - 模式（Conceptual Schema）：
     * 定义：逻辑级别，是数据库中全体数据的逻辑结构和特征的描述
     * 特点：一个数据库只有一个模式
     * 表现：在SQL中通过基本表实现
   
   - 内模式（Internal Schema）：
     * 定义：物理存储级别，描述数据在存储设备上的存储方式
     * 特点：与具体的存储设备和系统有关
   
   - 两级映像：
     * 外模式/模式映像：保证数据逻辑独立性
     * 模式/内模式映像：保证数据物理独立性

3. **数据模型**
   - 层次模型：
     * 结构：树形结构
     * 特点：只能表示1:n关系
     * 优点：查询效率高
   
   - 网状模型：
     * 结构：网络结构
     * 特点：可以表示m:n关系
     * 缺点：结构复杂，不易理解
   
   - 关系模型：
     * 结构：二维表格形式
     * 特点：
       - 每一行是一条记录
       - 每一列是一个属性
       - 关系必须是规范化的
     * 优点：简单直观，易于理解和使用

### 2. 关系数据库理论
1. **关系的基本概念**
   - 码的概念：
     * 超键：唯一标识元组的属性集
     * 候选键：最小超键
     * 主键：人为选定的候选键（一个关系只有一个主键）
     * 外键：引用另一个关系主键的属性（用于表间关联）

2. **关系代数运算**
   - 集合运算：
     * 并(∪)：两个关系的所有元组，去除重复
     * 差(-)：在关系1中而不在关系2中的元组
     * 交(∩)：同时在两个关系中的元组
     * 笛卡尔积(×)：两个关系的所有可能元组组合（元组数=关系1元组数×关系2元组数）
   
   - 专门运算：
     * 选择(σ)：选取满足条件的元组（WHERE子句）
     * 投影(π)：选取指定的列（SELECT子句）
     * 连接(⋈)：基于条件组合两个关系（JOIN）
     * 除(÷)：求一个关系中满足另一个关系所有组合的元组

3. **数据库完整性**
   - 实体完整性：主键非空且唯一
   - 参照完整性：外键值必须存在于主表或为NULL
   - 用户定义完整性：CHECK、DEFAULT、UNIQUE等约束

## 二、判断题（10分，10题）

### 1. 数据库设计过程
- 需求分析：使用数据流图描述业务流程
- 概念设计：使用E-R图描述数据关系
- 逻辑设计：将E-R图转换为关系模式，进行规范化
- 物理设计：确定存储结构和访问方法

### 2. 事务的特性（ACID）
- 原子性（Atomicity）：要么全执行，要么全不执行
- 一致性（Consistency）：保持数据一致
- 隔离性（Isolation）：事务间互不干扰（通过锁机制实现）
  * 读锁（S锁）：可以并发读
  * 写锁（X锁）：独占访问
- 持久性（Durability）：提交后永久保存（通过日志实现）

## 三、SQL语句题（25分，5题）

### 1. 条件查询
1. **比较运算符和WHERE子句**
```sql
-- 基本比较
SELECT * FROM 学生 WHERE 年龄 >= 18;  -- 常见考点

-- 范围查询
SELECT * FROM 成绩 WHERE 分数 BETWEEN 60 AND 100;

-- 模糊查询
SELECT * FROM 学生 WHERE 姓名 LIKE '张%';  -- 常见考点
```

2. **分组查询**
```sql
-- GROUP BY基本用法
SELECT 系别, COUNT(*) as 人数
FROM 学生
GROUP BY 系别;

-- HAVING使用（用于对分组结果进行过滤）
SELECT 课程号, AVG(成绩) as 平均分
FROM 选课
GROUP BY 课程号
HAVING AVG(成绩) < 60;  -- 注意：WHERE用于分组前过滤，HAVING用于分组后过滤
```

### 2. 多表查询
1. **连接查询**
```sql
-- 内连接（只返回匹配的行）
SELECT s.姓名, c.课程名, sc.成绩
FROM 学生 s
JOIN 选课 sc ON s.学号 = sc.学号
JOIN 课程 c ON sc.课程号 = c.课程号;

-- 外连接（保留不匹配的行）
SELECT s.姓名, c.课程名
FROM 学生 s
LEFT JOIN 选课 sc ON s.学号 = sc.学号;  -- LEFT JOIN保留左表全部记录
```

## 四、数据库设计题（15分，2题）

### 1. ER图设计要点
1. **实体的表示**
   - 矩形：表示实体型
   - 椭圆：表示属性（下划线表示主键）
   - 菱形：表示关系
   - 双线：表示弱实体（依赖于其他实体存在）

2. **关系的属性**
   - 映射基数：1:1, 1:n, m:n
   - 参与约束：全部参与（双线）、部分参与（单线）
   - 转换规则：
     * 1:1关系：可以合并为一个关系模式
     * 1:n关系：在n端加入外键
     * m:n关系：需要建立中间表

### 2. 设计原则
1. **实体设计原则**
   - 选择合适的主键（优先使用业务主键）
   - 确定实体间的关系（考虑业务规则）
   - 识别和处理弱实体（需要主实体的主键来唯一标识）
   - 考虑实体的完整性约束

2. **关系转换规则**
```sql
-- 一对一关系
CREATE TABLE 学籍档案 (
    档案号 CHAR(12) PRIMARY KEY,
    学号 CHAR(10) UNIQUE,  -- 唯一约束
    FOREIGN KEY (学号) REFERENCES 学生(学号)
);

-- 一对多关系
CREATE TABLE 学生 (
    学号 CHAR(10) PRIMARY KEY,
    系号 CHAR(6),
    FOREIGN KEY (系号) REFERENCES 系别(系号)
);

-- 多对多关系
CREATE TABLE 选课 (
    学号 CHAR(10),
    课程号 CHAR(8),
    PRIMARY KEY (学号, 课程号),  -- 联合主键
    FOREIGN KEY (学号) REFERENCES 学生(学号),
    FOREIGN KEY (课程号) REFERENCES 课程(课程号)
);
```

## 五、关系规范化题（10分，2题）

### 1. 范式判断步骤
1. **函数依赖分析**
   - 找出所有函数依赖
   - 确定码（超键、候选键、主键）

2. **范式判断标准**
   - 1NF：属性不可分（原子性）
   - 2NF：消除部分函数依赖（属性完全依赖于主键）
   - 3NF：消除传递函数依赖（非主属性间不存在函数依赖）
   - BCNF：消除主属性对码的依赖（任何属性都只依赖于码）
   - 说明：
     * 高范式通常意味着更少的数据冗余
     * 但可能会影响查询性能
     * 实际应用中可能需要适度反范式化

### 2. 规范化过程示例
```sql
-- 原始表（可能存在异常）
学生选课(学号, 姓名, 课程号, 课程名, 分数)

-- 2NF分解（消除部分依赖）
学生(学号, 姓名)
课程(课程号, 课程名)
选课(学号, 课程号, 分数)

-- 3NF分解（消除传递依赖）
系别(系号, 系名, 系主任)
学生(学号, 姓名, 系号)
```

## 考试答题要点

### 1. 选择题技巧
- 注意概念的准确定义
- 理解各种特性的区别
- 掌握基本原理

### 2. SQL语句题技巧
- 仔细分析表结构
- 正确使用WHERE和HAVING
- 注意多表连接的条件

### 3. 设计题技巧
- 先画ER图再转换成表
- 注意实体间的关系类型
- 正确处理关系的转换

### 4. 规范化题技巧
- 列出完整的函数依赖
- 准确判断范式级别
- 规范化分解要合理

祝考试顺利！
